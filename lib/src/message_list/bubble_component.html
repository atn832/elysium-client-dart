<div class="line" *ngIf="bubble != null && bubble.messages != null && bubble.messages.isNotEmpty">
    <span class="header {{getColorClass(bubble.author)}}">{{getHeader(bubble.author)}}</span>
    <span class="bubble {{getColorClass(bubble.author)}}">
        <div [class.sending]="sending === true" *ngFor="let message of bubble.messages">
            <div *ngFor="let fragment of parse(message)">
                <text-fragment [fragment]="fragment"></text-fragment>
            </div>
        </div>
        <span class="metadata">
            <span *ngIf="bubble.location != null && bubble.location.name != null">
                {{bubble.location.name}}, 
            </span>
                {{renderTime(bubble.dateRange.endTime)}}
        </span>
    </span>
</div>
